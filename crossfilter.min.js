!function(r){function n(r){return r}function t(r,n){for(var t=0,u=n.length,e=Array(u);u>t;++t)e[t]=r[n[t]];return e}function u(r){function n(n,t,u,e){for(;e>u;){var f=u+e>>>1;r(n[f])<t?u=f+1:e=f}return u}function t(n,t,u,e){for(;e>u;){var f=u+e>>>1;t<r(n[f])?e=f:u=f+1}return u}return t.right=t,t.left=n,t}function e(r){function n(r,n,t){for(var e=t-n,f=(e>>>1)+1;--f>0;)u(r,f,e,n);return r}function t(r,n,t){for(var e,f=t-n;--f>0;)e=r[n],r[n]=r[n+f],r[n+f]=e,u(r,1,f,n);return r}function u(n,t,u,e){for(var f,o=n[--e+t],i=r(o);(f=t<<1)<=u&&(u>f&&r(n[e+f])>r(n[e+f+1])&&f++,!(i<=r(n[e+f])));)n[e+t]=n[e+f],t=f;n[e+t]=o}return n.sort=t,n}function f(r){function n(n,u,e,f){var o,i,a,c,l=Array(f=Math.min(e-u,f));for(i=0;f>i;++i)l[i]=n[u++];if(t(l,0,f),e>u){o=r(l[0]);do(a=r(c=n[u])>o)&&(l[0]=c,o=r(t(l,0,f)[0]));while(++u<e)}return l}var t=e(r);return n}function o(r){function n(n,t,u){for(var e=t+1;u>e;++e){for(var f=e,o=n[e],i=r(o);f>t&&r(n[f-1])>i;--f)n[f]=n[f-1];n[f]=o}return n}return n}function i(r){function n(r,n,e){return(S>e-n?u:t)(r,n,e)}function t(t,u,e){var f,o=0|(e-u)/6,i=u+o,a=e-1-o,c=u+e-1>>1,l=c-o,v=c+o,h=t[i],s=r(h),p=t[l],d=r(p),g=t[c],y=r(g),m=t[v],x=r(m),A=t[a],b=r(A);s>d&&(f=h,h=p,p=f,f=s,s=d,d=f),x>b&&(f=m,m=A,A=f,f=x,x=b,b=f),s>y&&(f=h,h=g,g=f,f=s,s=y,y=f),d>y&&(f=p,p=g,g=f,f=d,d=y,y=f),s>x&&(f=h,h=m,m=f,f=s,s=x,x=f),y>x&&(f=g,g=m,m=f,f=y,y=x,x=f),d>b&&(f=p,p=A,A=f,f=d,d=b,b=f),d>y&&(f=p,p=g,g=f,f=d,d=y,y=f),x>b&&(f=m,m=A,A=f,f=x,x=b,b=f);var k=p,w=d,E=m,O=x;t[i]=h,t[l]=t[u],t[c]=g,t[v]=t[e-1],t[a]=A;var M=u+1,j=e-2,z=O>=w&&w>=O;if(z)for(var U=M;j>=U;++U){var C=t[U],N=r(C);if(w>N)U!==M&&(t[U]=t[M],t[M]=C),++M;else if(N>w)for(;;){var S=r(t[j]);{if(!(S>w)){if(w>S){t[U]=t[M],t[M++]=t[j],t[j--]=C;break}t[U]=t[j],t[j--]=C;break}j--}}}else for(var U=M;j>=U;U++){var C=t[U],N=r(C);if(w>N)U!==M&&(t[U]=t[M],t[M]=C),++M;else if(N>O)for(;;){var S=r(t[j]);{if(!(S>O)){w>S?(t[U]=t[M],t[M++]=t[j],t[j--]=C):(t[U]=t[j],t[j--]=C);break}if(j--,U>j)break}}}if(t[u]=t[M-1],t[M-1]=k,t[e-1]=t[j+1],t[j+1]=E,n(t,u,M-1),n(t,j+2,e),z)return t;if(i>M&&j>a){for(var I,S;(I=r(t[M]))<=w&&I>=w;)++M;for(;(S=r(t[j]))<=O&&S>=O;)--j;for(var U=M;j>=U;U++){var C=t[U],N=r(C);if(w>=N&&N>=w)U!==M&&(t[U]=t[M],t[M]=C),M++;else if(O>=N&&N>=O)for(;;){var S=r(t[j]);{if(!(O>=S&&S>=O)){w>S?(t[U]=t[M],t[M++]=t[j],t[j--]=C):(t[U]=t[j],t[j--]=C);break}if(j--,U>j)break}}}}return n(t,M,j+1)}var u=o(r);return n}function a(r){for(var n=Array(r),t=-1;++t<r;)n[t]=0;return n}function c(r,n){for(var t=r.length;n>t;)r[t++]=0;return r}function l(r,n){if(n>32)throw Error("invalid array width!");return r}function v(r,n){return function(t){var u=t.length;return[r.left(t,n,0,u),r.right(t,n,0,u)]}}function h(r,n){var t=n[0],u=n[1];return function(n){var e=n.length;return[r.left(n,t,0,e),r.left(n,u,0,e)]}}function s(r){return[0,r.length]}function p(){return null}function d(){return 0}function g(r){return r+1}function y(r){return r-1}function m(r){return function(n,t){return n+ +r(t)}}function x(r){return function(n,t){return n-r(t)}}function A(r){for(var n,t,u=r.length,e=2166136261,f=-1;++f<u;)n=r[f],(t=4278190080&n)&&(e^=t>>24,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)),(t=16711680&n)&&(e^=t>>16,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)),(t=65280&n)&&(e^=t>>8,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)),e^=255&n,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e+=e<<13,e^=e>>7,e+=e<<3,e^=e>>17,e+=e<<5,4294967295&e}function b(r){return r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24),r+=r<<13,r^=r>>7,r+=r<<3,r^=r>>17,r+=r<<5,4294967295&r}function k(){function r(r){var n=U,t=r.length;return t&&(z=z.concat(r),S=F(S,U+=t),q.forEach(function(u){u(r,n,t)})),k}function u(){for(var r=w(U,U),n=[],t=0,u=0;U>t;++t)S[t]?r[t]=u++:n.push(t);_.forEach(function(r){r(0,[],n)}),R.forEach(function(n){n(r)});for(var e,t=0,u=0;U>t;++t)(e=S[t])&&(t!==u&&(S[u]=e,z[u]=z[t]),++u);for(z.length=u;U>u;)S[--U]=0}function o(r){function u(n,u,e){Q=n.map(r),T=Z(E(e),0,e),Q=t(Q,T);var f,o=$(Q),i=o[0],a=o[1];if(V)for(f=0;e>f;++f)V(Q[f],f)||(S[T[f]+u]|=X);else{for(f=0;i>f;++f)S[T[f]+u]|=X;for(f=a;e>f;++f)S[T[f]+u]|=X}if(!u)return L=Q,P=T,tn=i,un=a,void 0;var c=L,l=P,v=0,h=0;for(L=Array(U),P=w(U,U),f=0;u>v&&e>h;++f)c[v]<Q[h]?(L[f]=c[v],P[f]=l[v++]):(L[f]=Q[h],P[f]=T[h++]+u);for(;u>v;++v,++f)L[f]=c[v],P[f]=l[v];for(;e>h;++h,++f)L[f]=Q[h],P[f]=T[h]+u;o=$(L),tn=o[0],un=o[1]}function o(r,n,t){rn.forEach(function(r){r(Q,T,n,t)}),Q=T=null}function a(r){for(var n,t=0,u=0;U>t;++t)S[n=P[t]]&&(t!==u&&(L[u]=L[t]),P[u]=r[n],++u);for(L.length=u;U>u;)P[u++]=0;var e=$(L);tn=e[0],un=e[1]}function c(r){var n=r[0],t=r[1];if(V)return V=null,I(function(r,u){return u>=n&&t>u}),tn=n,un=t,W;var u,e,f,o=[],i=[],a=fn||en;if(fn){for(u=0;U>u;++u)S[P[u]]|=X;tn=0,un=0,fn=!1}if(en){for(u=n;t>u;++u)S[P[u]]&=Y;tn>n&&(tn=n),t>un&&(un=t)}else{if(tn>n)for(u=n,e=Math.min(tn,t);e>u;++u)S[f=P[u]]^=X,o.push(f);else if(n>tn)for(u=tn,e=Math.min(n,un);e>u;++u)S[f=P[u]]^=X,i.push(f);if(t>un)for(u=Math.max(n,un),e=t;e>u;++u)S[f=P[u]]^=X,o.push(f);else if(un>t)for(u=Math.max(tn,t),e=un;e>u;++u)S[f=P[u]]^=X,i.push(f);tn=n,un=t}return _.forEach(function(r){r(X,o,i,a)}),W}function l(r){if(arguments.length>1){for(var n=0,t=arguments.length;t>n;++n)1===n&&(en=!0),(Array.isArray(r=arguments[n])?k:A)(r);return en=!1,fn=!0,W}return null==r?j():Array.isArray(r)?k(r):"function"==typeof r?b(r):A(r)}function A(r){return c(($=v(M,r))(L))}function b(r){fn=!0;for(var n=0;U>n;++n)r(L[n],n)?S[P[n]]&=Y:S[P[n]]|=X;return tn=0,lo1=U,_.forEach(function(r){r(X,[],[],!0)}),W}function k(r){return c(($=h(M,r))(L))}function j(){return c(($=s)(L))}function b(r){return $=s,I(V=r),tn=0,un=U,W}function I(r){var n,t,u,e=[],f=[];for(n=0;U>n;++n)!(S[t=P[n]]&X)^(u=r(L[n],n))&&(u?(S[t]&=Y,e.push(t)):(S[t]|=X,f.push(t)));_.forEach(function(r){r(X,e,f)})}function B(r){for(var n,t=[],u=un;--u>=tn&&r>0;)S[n=P[u]]||(t.push(z[n]),--r);return t}function D(r){for(var n,t=[],u=tn;un>u&&r>0;)S[n=P[u]]||(t.push(z[n]),--r),u++;return t}function H(r){function t(n,t,u,e){function f(){++T===Q&&(m=G(m,K<<=1),I=G(I,K),Q=O(K))}var l,v,h,s,d,g,y=N,m=w(T,Q),x=D,A=J,b=T,k=0,E=0;for(Z&&(x=A=p),N=Array(T),T=0,I=b>1?F(I,U):w(U,Q),b&&(h=(v=y[0]).key);e>E&&!((s=r(n[E]))>=s);)++E;for(;e>E;){for(v&&s>=h?(d=v,g=h,m[k]=T,(v=y[++k])&&(h=v.key)):(d={key:s,value:A()},g=s),N[T]=d;!(s>g||(I[l=t[E]+u]=T,S[l]&Y||(d.value=x(d.value,z[l])),++E>=e));)s=r(n[E]);f()}for(;b>k;)N[m[k]=T]=y[k++],f();if(T>k)for(k=0;u>k;++k)I[k]=m[I[k]];l=_.indexOf(V),T>1?(V=o,W=a):(1===T?(V=i,W=c):(V=p,W=p),I=null),_[l]=V}function u(){if(T>1){for(var r=T,n=N,t=w(r,r),u=0,e=0;U>u;++u)S[u]&&(t[I[e]=I[u]]=1,++e);for(N=[],T=0,u=0;r>u;++u)t[u]&&(t[u]=T++,N.push(n[u]));if(T>1)for(var u=0;e>u;++u)I[u]=t[I[u]];else I=null;_[_.indexOf(V)]=T>1?(W=a,V=o):1===T?(W=c,V=i):W=V=p}else if(1===T){for(var u=0;U>u;++u)if(S[u])return;N=[],T=0,_[_.indexOf(V)]=V=W=p}}function o(r,n,t,u){if(r!==X&&!(Z=Z||u)){var e,f,o,i;for(e=0,o=n.length;o>e;++e)S[f=n[e]]&Y||(i=N[I[f]],i.value=D(i.value,z[f]));for(e=0,o=t.length;o>e;++e)(S[f=t[e]]&Y)===r&&(i=N[I[f]],i.value=H(i.value,z[f]))}}function i(r,n,t,u){if(r!==X&&!(Z=Z||u)){var e,f,o,i=N[0];for(e=0,o=n.length;o>e;++e)S[f=n[e]]&Y||(i.value=D(i.value,z[f]));for(e=0,o=t.length;o>e;++e)(S[f=t[e]]&Y)===r&&(i.value=H(i.value,z[f]))}}function a(){var r,n;for(r=0;T>r;++r)N[r].value=J();for(r=0;U>r;++r)S[r]&Y||(n=N[I[r]],n.value=D(n.value,z[r]))}function c(){var r,n=N[0];for(n.value=J(),r=0;U>r;++r)S[r]&Y||(n.value=D(n.value,z[r]))}function l(){return Z&&(W(),Z=!1),N}function v(){return Z&&(W(),Z=!1),I}function h(r){var n=q(l(),0,N.length,r);return B.sort(n,0,n.length)}function s(r,n,t){return D=r,H=n,J=t,Z=!0,C}function A(){return s(g,y,d)}function b(r){return s(m(r),x(r),d)}function k(r){function n(n){return r(n.value)}return q=f(n),B=e(n),C}function E(){return k(n)}function M(){return T}function j(){var r=_.indexOf(V);return r>=0&&_.splice(r,1),r=rn.indexOf(t),r>=0&&rn.splice(r,1),r=R.indexOf(u),r>=0&&R.splice(r,1),C}var C={_groupIndex:v,top:h,all:l,reduce:s,reduceCount:A,reduceSum:b,order:k,orderNatural:E,size:M,dispose:j,remove:j};nn.push(C);var N,I,q,B,D,H,J,K=8,Q=O(K),T=0,V=p,W=p,Z=!0;return arguments.length<1&&(r=n),_.push(V),rn.push(t),R.push(u),t(L,P,0,U),A().orderNatural()}function J(){var r=H(p),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function K(){nn.forEach(function(r){r.dispose()});var r=q.indexOf(u);for(r>=0&&q.splice(r,1),r=q.indexOf(o),r>=0&&q.splice(r,1),r=R.indexOf(a),r>=0&&R.splice(r,1),r=0;U>r;++r)S[r]&=Y;return C&=Y,W}var L,P,Q,T,V,W={filter:l,filterExact:A,filterRange:k,filterFunction:b,filterAll:j,top:B,bottom:D,group:H,groupAll:J,dispose:K,remove:K},X=~C&-~C,Y=~X,Z=i(function(r){return Q[r]}),$=s,rn=[],nn=[],tn=0,un=0,en=!1,fn=!1;return q.unshift(u),q.push(o),R.push(a),C|=X,(N>=32?!X:C&(1<<N)-1)&&(S=G(S,N<<=1)),u(z,0,U),o(z,0,U),W}function a(){function r(r,n){var t;if(!s)for(t=n;U>t;++t)S[t]||(a=c(a,z[t]))}function n(r,n,t,u){var e,f,o;if(!(s=s||u)){for(e=0,o=n.length;o>e;++e)S[f=n[e]]||(a=c(a,z[f]));for(e=0,o=t.length;o>e;++e)S[f=t[e]]===r&&(a=l(a,z[f]))}}function t(){var r;for(a=v(),r=0;U>r;++r)S[r]||(a=c(a,z[r]))}function u(r,n,t){return c=r,l=n,v=t,s=!0,h}function e(){return u(g,y,d)}function f(r){return u(m(r),x(r),d)}function o(){return s&&(t(),s=!1),a}function i(){var t=_.indexOf(n);return t>=0&&_.splice(t),t=q.indexOf(r),t>=0&&q.splice(t),h}var a,c,l,v,h={reduce:u,reduceCount:e,reduceSum:f,value:o,dispose:i,remove:i},s=!0;return _.push(n),q.push(r),r(z,0,U),e()}function c(){return U}function l(r){function n(r,n){var t,u=!0;for(t=0;u&&E>t;t++)u=r[t]==n[t];return u}function t(r,n){var t,u=0;for(t=0;!u&&E>t;t++)u=r[t]<n[t]?-1:r[t]>n[t]?1:0;return u}function u(){function u(){var t,u,e,f,o,i,a=[],c=Math.max(Math.pow(2,Math.ceil(Math.log(1.5*U)/Math.log(2))),256),h=c-1,s=Array(c);for(t=0;E>t;t++)a.push(r[t]._groupIndex());for(t=0;U>t;t++){for(i=[],u=0;E>u;u++)i.push(a[u]?a[u][t]:0);for(e=-1,f=A(i)&h,o=b(f),f&=h;i&&s[f];)n(l[s[f]-1],i)?(v.push(s[f]-1),i=null):(e==f&&(o=1),-1==e&&(e=f),f=f+o&h);i&&(s[f]=l.length+1,v.push(l.length),l.push(i))}w=l.length}function e(){var r,n=[];for(r=0;w>r;r++)l[r].push(r);for(l.sort(t),r=0;w>r;r++)n[l[r][E]]=r;for(r=0;U>r;r++)v[r]=n[v[r]]}function f(){var n,t,u=[];for(n=0;E>n;n++)u.push(r[n].all());for(n=0;w>n;n++){for(t=[],j=0;E>j;j++)t.push(u[j][l[n][j]].key);l[n]={key:t}}}function o(){var r,n;for(r=0;w>r;++r)l[r].value=p();for(r=0;U>r;++r)S[r]||(n=l[v[r]],n.value=h(n.value,z[r]))}l=[],v=[],u(),e(),f(),o()}function e(r,n,t){if(!O){var u,e,f,o;for(u=0,f=n.length;f>u;++u)S[e=n[u]]||(o=l[v[e]],o.value=h(o.value,z[e]));for(u=0,f=t.length;f>u;++u)S[e=t[u]]&&(o=l[v[e]],o.value=s(o.value,z[e]))}}function f(){return O&&(u(),O=!1),l}function o(){return O&&(u(),O=!1),w}function i(r,n,t){return h=r,s=n,p=t,O=!0,k}function a(){return i(g,y,d)}function c(r){return i(m(r),x(r),d)}var l,v,h,s,p,k={all:f,size:o,reduce:i,reduceCount:a,reduceSum:c},w=0,E=r.length,O=!0;return _.push(e),a()}var k={add:r,remove:u,dimension:o,pivotGroup:l,groupAll:a,size:c},z=[],U=0,C=0,N=8,S=I(0),_=[],q=[],R=[];return arguments.length?r(arguments[0]):k}function w(r,n){return(257>n?I:65537>n?_:q)(r)}function E(r){for(var n=w(r,r),t=-1;++t<r;)n[t]=t;return n}function O(r){return 8===r?256:16===r?65536:4294967296}k.version="1.3.7",k.permute=t;var M=k.bisect=u(n);M.by=u;var z=k.heap=e(n);z.by=e;var U=k.heapselect=f(n);U.by=f;var C=k.insertionsort=o(n);C.by=o;var N=k.quicksort=i(n);N.by=i;var S=32,I=a,_=a,q=a,F=c,G=l;"undefined"!=typeof Uint8Array&&(I=function(r){return new Uint8Array(r)},_=function(r){return new Uint16Array(r)},q=function(r){return new Uint32Array(r)},F=function(r,n){if(r.length>=n)return r;var t=new r.constructor(n);return t.set(r),t},G=function(r,n){var t;switch(n){case 16:t=_(r.length);break;case 32:t=q(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=k}("undefined"!=typeof exports&&exports||this);